# ==================================================
# E2E Test Configuration
# ==================================================
# 
# IMPORTANT: Copy this file to .env.test and fill with actual values
# 
#   cp .env.test.example .env.test
#
# ==================================================

# ==================================================
# 1. SUPABASE CONNECTION
# ==================================================
# 
# MUST BE THE SAME as your development environment (.env)!
# 
# Tests run in Node.js (server-side), so NO PUBLIC_ prefix!
# But values MUST match your .env file
#
# If your .env has: PUBLIC_SUPABASE_URL=https://xyz.supabase.co
# Then .env.test has: SUPABASE_URL=https://xyz.supabase.co (SAME URL, no PUBLIC_)

SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-anon-key-here

# Service Role Key - REQUIRED for test cleanup
# This key has admin privileges and is used to delete test users after tests
# Get it from: Supabase Dashboard → Settings → API → service_role key (secret)
# WARNING: Keep this key secret! Never commit it to git!
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# For Local Supabase (if using 'supabase start'):
# SUPABASE_URL=http://127.0.0.1:54321
# SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...  # From supabase start output

# ==================================================
# 2. TEST USER CREDENTIALS
# ==================================================
# 
# The user MUST exist in the database specified above!
# 
# How to create test user:
# 
# Option A: Via Supabase Dashboard (Remote)
# 1. Open https://supabase.com/dashboard
# 2. Go to Authentication → Users
# 3. Click "Add User"
# 4. Email: test@test.com
# 5. Password: TestPassword123!
# 6. Check: "Auto Confirm User" ✅
# 7. Click "Create User"
# 8. Copy the User ID (UUID)
# 
# Option B: Via Local Studio (Local Supabase)
# 1. Run: supabase start
# 2. Open: http://127.0.0.1:54323 (Studio)
# 3. Follow same steps as Option A
# 
# Option C: Via Application UI (Easiest)
# 1. Run: npm run dev
# 2. Open: http://localhost:3000/register
# 3. Register: test@test.com / TestPassword123!
# 4. Get User ID from Dashboard

E2E_USERNAME=test@test.com
E2E_PASSWORD=TestPassword123!
E2E_USERNAME_ID=123e4567-e89b-12d3-a456-426614174000

# ==================================================
# TROUBLESHOOTING
# ==================================================
# 
# Problem: "Nieprawidłowy email lub hasło" (Invalid credentials)
# Solution: 
#   1. Verify test user exists in Supabase Auth
#   2. Check password is correct
#   3. Ensure SUPABASE_URL matches your .env file
# 
# Problem: Tests timeout during login
# Solution:
#   1. Check if dev server is running: npm run dev
#   2. Verify http://localhost:3000 works in browser
#   3. Check SUPABASE_URL is accessible
# 
# Problem: "Missing SUPABASE_ANON_KEY"
# Solution:
#   1. Ensure you copied .env.test.example to .env.test
#   2. Fill in all required values
#   3. Don't use placeholder values like '###'
#
# Problem: Test users not being cleaned up
# Solution:
#   1. Verify SUPABASE_SERVICE_ROLE_KEY is set in .env.test
#   2. Check that service role key is correct (from Supabase Dashboard)
#   3. Ensure test users are NOT in the whitelist (test@test.com, test-b@test.com, wra@acme.com)